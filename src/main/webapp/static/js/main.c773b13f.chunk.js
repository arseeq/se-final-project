(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{143:function(e,t,a){e.exports=a(323)},323:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(34),s=a.n(l),i=a(7),o=a(8),c=a(9),m=a(10),u=a(11),d=a(5),h=a(327),g=a(328),p=a(325),v=a(326),E=a(19),b=a.n(E),f="http://192.168.0.105/aintrovert",y="/aintrovert",C="ws://192.168.0.105:10001",k=a(3),O=a(324),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).toggle=a.toggle.bind(Object(d.a)(Object(d.a)(a))),a.state={isOpen:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return r.a.createElement(k.Navbar,{color:"light",light:!0,expand:"md"},r.a.createElement(k.NavbarBrand,{href:"/"},"AIntrovert"),r.a.createElement(k.NavbarToggler,{onClick:this.toggle}),r.a.createElement(k.Collapse,{isOpen:this.state.isOpen,navbar:!0},r.a.createElement(k.Nav,{className:"ml-auto",navbar:!0},r.a.createElement(k.UncontrolledDropdown,{nav:!0,inNavbar:!0},r.a.createElement(k.DropdownToggle,{nav:!0,caret:!0},"Options"),r.a.createElement(k.DropdownMenu,{right:!0},r.a.createElement(k.DropdownItem,null,"Option 1"),r.a.createElement(k.DropdownItem,null,"Option 2"),r.a.createElement(k.DropdownItem,{divider:!0}),r.a.createElement(k.DropdownItem,null,"Reset"))),!this.props.auth&&r.a.createElement(r.a.Fragment,null,"signin"!==this.props.id?r.a.createElement(k.NavItem,null,r.a.createElement(O.a,{className:"nav",to:y+"/signin"},"Sign In")):"","signup"!==this.props.id?r.a.createElement(k.NavItem,null,r.a.createElement(O.a,{to:y+"/signup"},"Sign Up")):""),this.props.auth&&"dashboard"!==this.props.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.NavItem,null,r.a.createElement(O.a,{to:y+"/dashboard"},"Dashboard"))),this.props.auth&&r.a.createElement(r.a.Fragment,null,r.a.createElement(k.NavItem,{className:"btn btn-link",onClick:this.props.logout},"Sign Out")))))}}]),t}(n.Component),S=a(12),w=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"validateEmail",value:function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}},{key:"validatePassword",value:function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=\S+$)(?=.{8,})/.test(String(e))}},{key:"validName",value:function(e){return/^([A-Z][a-z]+$)/.test(String(e))}},{key:"validImageURL",value:function(e){return/(http(s?):)([\/|.|\w|\s|-])*\.(?:jpg|gif|png|jpeg)/.test(String(e))||0===e.length}},{key:"validEventName",value:function(e){return e.length>0}},{key:"validEventLocation",value:function(e){return e.length>0}},{key:"validEventDate",value:function(e){return e.length>0}},{key:"validEventTime",value:function(e){return e.length>0}},{key:"validEventPrice",value:function(e){return e.length>0&&e>=0}},{key:"validEventPoints",value:function(e){return e.length>0&&e>=0}},{key:"validEventCategory",value:function(e){return e.length>0}},{key:"validEventParticipants",value:function(e){return e.length>0&&e>=2}}]),e}(),x=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={email:"",password:"",errormsg:!1},a.signin=a.signin.bind(Object(d.a)(Object(d.a)(a))),a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"signin",value:function(){if(w.validateEmail(this.state.email)&&w.validatePassword(this.state.password)){var e=this;b()(f+"/mainServices/auth/signin",{method:"POST",data:JSON.stringify({email:e.state.email,password:e.state.password}),headers:{"Content-Type":"application/json"}}).then(function(t){localStorage.setItem("token",t.data),localStorage.setItem("email",e.state.email),e.props.login(e.state.email)}).catch(function(t){console.log(t),e.setState({errormsg:!0})})}else e.setState({errormsg:!0})}},{key:"handleChange",value:function(e){switch(e.target.name){case"email":this.setState({email:e.target.value});break;case"password":this.setState({password:e.target.value})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j,{id:"signin",auth:!1}),r.a.createElement("div",{className:"container text-center",style:{marginTop:"20px",width:"500px"}},r.a.createElement("div",{className:"row"},r.a.createElement("h1",{style:{marginLeft:"190px"}},"Sign In")),r.a.createElement(S.AvForm,{id:"loginForm",style:{marginTop:"80px",marginBottom:"80px"}},r.a.createElement("div",{className:"incorrectEmailPasswordError",style:{display:this.state.errormsg?"block":"none"}},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Invalid login! Try again")),r.a.createElement(S.AvField,{name:"email",label:"Email",onChange:this.handleChange,type:"email",value:this.state.email}),r.a.createElement(S.AvField,{name:"password",label:"Password",onChange:this.handleChange,type:"password",value:this.state.password}),r.a.createElement(k.Button,{color:"primary",onClick:this.signin},"Submit"))))}}]),t}(n.Component),N=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={name:"",surname:"",email:"",password:"",passwordConfirm:"",sendDisabled:!0,errormsg:!1},a.signup=a.signup.bind(Object(d.a)(Object(d.a)(a))),a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"signup",value:function(){var e=this;b()(f+"/mainServices/auth/signup",{method:"POST",data:JSON.stringify({name:e.state.name,surname:e.state.surname,email:e.state.email,password:e.state.password}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t),localStorage.setItem("token",t.data),localStorage.setItem("email",e.state.email),e.props.login(e.state.email)}).catch(function(t){console.log(t),e.setState({errormsg:!0})})}},{key:"handleChange",value:function(e){switch(e.target.name){case"name":this.setState({name:e.target.value});break;case"surname":this.setState({surname:e.target.value});break;case"email":this.setState({email:e.target.value});break;case"password":this.setState({password:e.target.value});break;case"passwordConfirm":this.setState({passwordConfirm:e.target.value})}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j,{id:"signup",auth:!1}),r.a.createElement("div",{className:"container text-center",style:{paddingTop:"20px",width:"500px"}},r.a.createElement("div",{className:"row"},r.a.createElement("h2",{style:{marginLeft:"80px",marginBottom:"20px"}},"Sign Up")),r.a.createElement(S.AvForm,{id:"registerForm",style:{marginTop:"80px",marginBottom:"80px"}},r.a.createElement("div",{className:"userExists",style:{display:this.state.errormsg?"block":"none"}},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Entered email already exists! Enter another email")),r.a.createElement(S.AvField,{name:"name",label:"Name",id:"name",onChange:this.handleChange,type:"text",value:this.state.name,errorMessage:"Name should contain at least 2 characters",validate:{required:{value:!0},pattern:{value:"^([A-Z][a-z]+$)",errorMessage:"Name should be in latin alphabetic starting with the first capital letter"},minLength:{value:2}}}),r.a.createElement(S.AvField,{name:"surname",label:"Surname",id:"surname",onChange:this.handleChange,type:"text",value:this.state.surname,errorMessage:"Surname should contain at least 1 character",validate:{required:{value:!0},pattern:{value:"^([A-Z][a-z]+$)",errorMessage:"Surname should be in latin alphabetic starting with the first capital letter"},minLength:{value:2}}}),r.a.createElement(S.AvField,{name:"email",label:"Email",onChange:this.handleChange,type:"email",value:this.state.email,errorMessage:"Invalid email format",validate:{required:{value:!0},pattern:{value:'^(([^<>()\\[\\]\\\\.,;:\\s@"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$',errorMessage:"Invalid email"}}}),r.a.createElement(S.AvField,{name:"password",label:"Password",onChange:this.handleChange,type:"password",value:this.state.password,errorMessage:"Your password should contain at least 8 characters",validate:{required:{value:!0},pattern:{value:"^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=\\S+$)(?=.{8,})",errorMessage:"Minimum 8 characters, at least 1 uppercase, 1 lowercase and 1 number. No whitespaces allowed!"}}}),r.a.createElement(S.AvField,{name:"passwordConfirm",label:"Confirm password",onChange:this.handleChange,type:"password",value:this.state.passwordConfirm,errorMessage:"Passwords do not match",validate:{required:{value:!0},pattern:{value:this.state.password}}}),r.a.createElement(k.Button,{color:"primary",onClick:this.signup,disabled:!w.validateEmail(this.state.email)||!w.validatePassword(this.state.password)||this.state.password!==this.state.passwordConfirm||!w.validName(this.state.name)||!w.validName(this.state.surname)},"Submit"))))}}]),t}(n.Component),F=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(j,{id:"dashboard",auth:!0,logout:this.props.logout}),r.a.createElement("h1",null,"Dashboard Page. Wellcome, ",this.props.user,"!"))}}]),t}(n.Component),B=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k.Card,null,r.a.createElement(k.CardFooter,{className:"text-muted text-center"},"\xa9 2018 ",r.a.createElement("span",{style:{color:"#0000ff"}},"AIntrovert")," All Rights Reserved")))}}]),t}(n.Component),I=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(k.Card,{style:{margin:"10px"}},r.a.createElement(k.CardImg,{width:"100%",height:"200px",src:this.props.img,alt:"Card image cap"}),r.a.createElement(k.CardBody,null,r.a.createElement(k.CardTitle,null,this.props.name),r.a.createElement(k.CardSubtitle,null,this.props.meetingdate),r.a.createElement(k.CardText,null,this.props.description),r.a.createElement(O.a,{to:y+"/chat/"+this.props.id},"Chat"),r.a.createElement(k.Button,null,"See details")))}}]),t}(n.Component),A=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={page:1,list:[]},a.join=a.join.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"join",value:function(e){b()(f+"/mainServices/event/join",{method:"POST",data:JSON.stringify({id:e.target.name,token:localStorage.getItem("token")}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.data),e.disabled=!0}).catch(function(e){console.log(e)})}},{key:"componentWillMount",value:function(){var e=this;b()(f+"/mainServices/event/getallevents",{method:"GET",data:JSON.stringify({token:localStorage.getItem("token")}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.data),e.setState({list:t.data})}).catch(function(t){console.log(t),e.setState({authorized:!1})})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"border rounded"},r.a.createElement(k.Table,{hover:!0},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Group #"),r.a.createElement("th",null,"Group Name"),r.a.createElement("th",null,"Date"),r.a.createElement("th",null,"Time"),r.a.createElement("th",null,"Location"),r.a.createElement("th",null,"Action"))),r.a.createElement("tbody",null,e.state.list.map(function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("th",{scope:"row"},a),r.a.createElement("td",null,t.name),r.a.createElement("td",null,t.description),r.a.createElement("td",null,t.meetingdate),r.a.createElement("td",null,t.location),r.a.createElement("td",null,t.price),r.a.createElement("td",null,t.points),r.a.createElement("td",null,t.maxsize),r.a.createElement("td",null,r.a.createElement(k.Button,{color:"danger"},"details")," ",r.a.createElement(k.Button,{disabled:t.admin===localStorage.getItem("email"),color:"success",onClick:e.join,name:t.id},"join")," "))}))),r.a.createElement(k.Row,{className:"paging"},r.a.createElement(k.Col,{md:{offset:10}},r.a.createElement(k.Button,{color:"primary"},"previous")," ",r.a.createElement(k.Button,{color:"info"},"next")," ")))}}]),t}(n.Component),M=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={page:1,list:[]},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;b()(f+"/mainServices/event/getmyevents",{method:"POST",data:JSON.stringify({token:localStorage.getItem("token")}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log("my List:"),console.log(t.data[0]),e.setState({list:t.data})}).catch(function(t){console.log(t),e.setState({authorized:!1})})}},{key:"render",value:function(){return r.a.createElement(k.Row,{className:"border rounded"},r.a.createElement(k.Row,{style:{width:"100%"}},this.state.list.map(function(e,t){return r.a.createElement(k.Col,{md:"4",key:e.id},r.a.createElement(I,{name:e.name,id:e.id,description:e.description,meetingdate:e.meetingdate,img:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTkEpDkrqjSyqbwBci92SQoZxyNR7eKqoL8b8CBuBJqjsvkkFXgMA"}))})),r.a.createElement(k.Row,{className:"paging"},r.a.createElement(k.Col,{md:{offset:10}},r.a.createElement(k.Button,{color:"primary"},"previous")," ",r.a.createElement(k.Button,{color:"info"},"next")," ")))}}]),t}(n.Component),T=a(45),D=a.n(T),L=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={name:"",date:"",time:"",description:"",location:"",price:0,points:0,img:"",msg:"",participants:"",errormsg:!1,createmsg:!1,datemsg:!1},a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a.send=a.send.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"handleChange",value:function(e){switch(e.target.name){case"name":this.setState({name:e.target.value});break;case"location":this.setState({location:e.target.value});break;case"date":this.setState({date:e.target.value});break;case"time":this.setState({time:e.target.value});break;case"description":this.setState({description:e.target.value});break;case"price":this.setState({price:e.target.value});break;case"points":this.setState({points:e.target.value});break;case"img":this.setState({img:e.target.value});break;case"participants":this.setState({participants:e.target.value})}}},{key:"send",value:function(){var e=this,t=(new Date).getDate(),a=(new Date).getMonth()+1,n=(new Date).getFullYear();t<10&&(t="0"+t),a<10&&(a="0"+a);var r=e.state.date.split("-"),l=r[2],s=r[1],i=r[0],o=n+"-"+a+"-"+t,c=i+"-"+s+"-"+l;console.log(o),console.log(c);var m=(new Date).toLocaleString().split(", ")[1].split(":"),u=m[0],d=m[1],h=m[2].split(" ")[1],g=D()(u+":"+d+" "+h,"h:mm A").format("HH:mm"),p=e.state.time.split(":"),v=p[0],E=p[1],y=g.split(":"),C=y[0]+"-"+y[1],k=v+"-"+E;console.log(C),console.log(k),c<o?(e.setState({datemsg:!0}),e.setState({errormsg:!1}),e.setState({createmsg:!1})):k<C&&c===o?(e.setState({datemsg:!0}),e.setState({errormsg:!1}),e.setState({createmsg:!1})):(console.log({name:e.state.name,meetingdate:v+"-"+E+" "+s+"/"+l+"/"+i,description:e.state.description,location:e.state.location,price:e.state.price+"",points:e.state.points+"",maxsize:e.state.participants+"",img:e.state.img,token:localStorage.getItem("token")}),b()(f+"/mainServices/event/create",{method:"POST",data:JSON.stringify({name:e.state.name,meetingdate:v+"-"+E+" "+s+"/"+l+"/"+i,description:e.state.description,location:e.state.location,price:e.state.price+"",points:e.state.points+"",maxsize:e.state.participants+"",img:e.state.img,token:localStorage.getItem("token")}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t),e.setState({createmsg:!0}),e.setState({datemsg:!1}),e.setState({errormsg:!1})}).catch(function(t){console.log(t),e.setState({errormsg:!0}),e.setState({createmsg:!1}),e.setState({datemsg:!1})}))}},{key:"render",value:function(){return r.a.createElement(S.AvForm,{id:"eventCreate",style:{marginTop:"10px",marginBottom:"80px"}},r.a.createElement(k.Label,{for:"name"},"Name of the Event ",r.a.createElement("span",null,"*")),r.a.createElement(S.AvField,{name:"name",id:"name",onChange:this.handleChange,type:"text",required:!0,value:this.state.name,errorMessage:"Name of the event should be at least 1 character",validate:{required:{value:!0},minLength:{value:1}}}),r.a.createElement(k.Label,{for:"location"},"Location ",r.a.createElement("span",null,"*")),r.a.createElement(S.AvField,{name:"location",id:"location",onChange:this.handleChange,type:"text",value:this.state.location,errorMessage:"Location should be at least 1 character",validate:{required:{value:!0},minLength:{value:2}},required:!0}),r.a.createElement(S.AvField,{name:"description",label:"Description",id:"description",onChange:this.handleChange,type:"textarea",value:this.state.description}),r.a.createElement(k.Label,{for:"date"},"Date ",r.a.createElement("span",null,"*")),r.a.createElement(S.AvField,{name:"date",id:"date",onChange:this.handleChange,type:"date",value:this.state.date,errorMessage:"Name should contain at least 2 characters"}),r.a.createElement(k.Label,{for:"time"},"Time ",r.a.createElement("span",null,"*")),r.a.createElement(S.AvInput,{name:"time",id:"time",onChange:this.handleChange,type:"time",value:this.state.time,required:!0}),r.a.createElement(k.Label,{for:"price"},"Price (at least 0)",r.a.createElement("span",null,"*")),r.a.createElement(S.AvField,{name:"price",id:"price",onChange:this.handleChange,type:"number",value:this.state.price,min:"0",required:!0}),r.a.createElement(k.Label,{for:"points"},"Points (at least 0)",r.a.createElement("span",null,"*")),r.a.createElement(S.AvField,{name:"points",id:"points",onChange:this.handleChange,type:"number",value:this.state.points,min:"0",required:!0}),r.a.createElement(k.Label,{for:"participants"},"Maximum number of participants (at least 2)",r.a.createElement("span",null,"*")),r.a.createElement(S.AvField,{name:"participants",id:"participants",onChange:this.handleChange,type:"number",value:this.state.participants,min:"2",required:!0}),r.a.createElement(S.AvField,{name:"img",label:"Link to image",id:"img",onChange:this.handleChange,type:"text",value:this.state.img,errorMessage:"URL input is incorrect",validate:{required:{value:!0},pattern:{value:"(http(s?):)([/|.|w|s|-])*.(?:jpg|gif|png|jpeg)",errorMessage:"URL input is incorrect"},minLength:{value:0}},required:!0}),r.a.createElement("div",{className:"eventCreated",style:{display:this.state.createmsg?"block":"none"}},r.a.createElement("div",{className:"alert alert-success"},"Event successfully created!")),r.a.createElement("div",{className:"eventExists",style:{display:this.state.errormsg?"block":"none"}},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Event for this date and time already reserved! Enter another, please!")),r.a.createElement("div",{className:"dateExpired",style:{display:this.state.datemsg?"block":"none"}},r.a.createElement("div",{className:"alert alert-danger",role:"alert"},"Date is from past! Choose future date!")),r.a.createElement(k.Button,{color:"primary",onClick:this.send,disabled:!w.validEventParticipants(this.state.participants)||!w.validEventPoints(this.state.points)||!w.validEventPrice(this.state.price)||!w.validEventTime(this.state.time)||!w.validEventDate(this.state.date)||!w.validImageURL(this.state.img)||!w.validEventLocation(this.state.location)||!w.validEventName(this.state.name)},"Submit"))}}]),t}(n.Component),z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={color1:"#39CCCC",color2:"#7FDBFF",color3:"#7FDBFF",st:1},a.select1=a.select1.bind(Object(d.a)(Object(d.a)(a))),a.select2=a.select2.bind(Object(d.a)(Object(d.a)(a))),a.select3=a.select3.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"select1",value:function(){this.setState({color1:"#39CCCC",color2:"#7FDBFF",color3:"#7FDBFF",st:1})}},{key:"select2",value:function(){this.setState({color1:"#7FDBFF",color2:"#39CCCC",color3:"#7FDBFF",st:2})}},{key:"select3",value:function(){this.setState({color1:"#7FDBFF",color2:"#7FDBFF",color3:"#39CCCC",st:3})}},{key:"render",value:function(){return 1===this.state.st?r.a.createElement("div",null,r.a.createElement(j,{id:"dashboard",auth:!0,logout:this.props.logout}),r.a.createElement(k.Container,{className:"table"},r.a.createElement(k.Row,null,r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color1},onClick:this.select1},r.a.createElement("h4",null,"All events"))),r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color2},onClick:this.select2},r.a.createElement("h4",null,"My events"))),r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color3},onClick:this.select3},r.a.createElement("h4",null,"Create Event Group")))),r.a.createElement(A,null))):2===this.state.st?r.a.createElement("div",null,r.a.createElement(j,{id:"dashboard",auth:!0,logout:this.props.logout}),r.a.createElement(k.Container,{className:"table"},r.a.createElement(k.Row,null,r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color1},onClick:this.select1},r.a.createElement("h4",null,"All events"))),r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color2},onClick:this.select2},r.a.createElement("h4",null,"My events"))),r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color3},onClick:this.select3},r.a.createElement("h4",null,"Create Event Group")))),r.a.createElement(M,null))):3===this.state.st?r.a.createElement("div",null,r.a.createElement(j,{id:"dashboard",auth:!0,logout:this.props.logout}),r.a.createElement(k.Container,{className:"table"},r.a.createElement(k.Row,null,r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color1},onClick:this.select1},r.a.createElement("h4",null,"All events"))),r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color2},onClick:this.select2},r.a.createElement("h4",null,"My events"))),r.a.createElement(k.Col,{sm:"4"},r.a.createElement(k.Button,{color:"primary",style:{width:"100%",background:this.state.color3},onClick:this.select3},r.a.createElement("h4",null,"Create Event Group")))),r.a.createElement(L,null))):void 0}}]),t}(n.Component),P=function(e){function t(e){return Object(i.a)(this,t),Object(c.a)(this,Object(m.a)(t).call(this,e))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{border:"1px solid #909090",borderRadius:"10px",width:"60%",paddingLeft:"10px",paddingRight:"10px",backgroundColor:this.props.color,display:"inline-block"}},r.a.createElement("p",{className:"text-left",style:{marginBottom:0,color:"#4E729A",fontWeight:"bold"}},this.props.author),r.a.createElement("p",{className:"text-left",style:{marginBottom:0,paddingLeft:"10px"}},this.props.message),r.a.createElement("p",{className:"text-right",style:{marginBottom:0,color:"#777777"}},this.props.time))}}]),t}(n.Component),R=a(329);function q(e,t){!function e(t,a){setTimeout(function(){if(1===t.readyState)return console.log("Connection is made"),void(null!=a&&a());console.log("wait for connection..."),e(t,a)},5)}(e,function(){console.log("message sent!!!"),e.send(t)})}var J=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={msg:"",history:[]},a.sendMsg=a.sendMsg.bind(Object(d.a)(Object(d.a)(a))),a.handleChange=a.handleChange.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.match.params,t=this;this.props.setOnMsg(function(a){var n=JSON.parse(a.data);console.log("    -"),"history"===n.type&&n.eventId===parseInt(e.id)&&n.data.length>0?t.setState({history:n.data}):"message"===n.type&&n.eventId===parseInt(e.id)&&(console.log(n.data[0]),t.setState({history:t.state.history.concat(n.data)}))}),q(this.props.socket,JSON.stringify({type:"history",token:localStorage.getItem("token"),eventId:e.id}))}},{key:"sendMsg",value:function(){var e=this.props.match.params,t={type:"message",token:localStorage.getItem("token"),eventId:e.id,msg:this.state.msg};q(this.props.socket,JSON.stringify(t)),console.log("sent")}},{key:"handleChange",value:function(e){switch(e.target.name){case"newMsg":this.setState({msg:e.target.value})}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(j,{id:"dashboard",auth:!0,logout:e.props.logout}),r.a.createElement(k.Container,{className:"text-center",style:{border:"1px solid #909090",borderRadius:"5px",marginTop:"10px",marginBottom:"10px",width:"70%"}},r.a.createElement(k.Row,{style:{borderBottom:"1px solid #C3CBD4",backgroundColor:"#4E729A",color:"white",paddingLeft:"420px",fontSize:"40px",fontFamily:"bold"}},"Chat"),e.state.history.map(function(t){return r.a.createElement("div",{key:t.id,className:t.author.email===e.props.user?"text-right":"text-left",style:{margin:"10px"}},r.a.createElement(P,{color:t.author.email===e.props.user?"#edf0f5":"white",author:t.author.email,message:t.msg,time:t.date}))}),r.a.createElement(k.Row,{style:{borderTop:"1px solid #C3CBD4",backgroundColor:"#F3F3F3",paddingTop:"10px",paddingBottom:"5px"}},r.a.createElement(k.Col,{md:"10"},r.a.createElement("textarea",{onChange:e.handleChange,name:"newMsg",style:{width:"90%",padding:"5px",borderRadius:"5px"},value:e.state.msg})),r.a.createElement(k.Button,{onClick:e.sendMsg,type:"submit",style:{height:"45px",marginTop:"7px",backgroundColor:"#4E729A"}},"Send message"))))}}]),t}(n.Component),Z=Object(R.a)(J),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={authorized:null,user:"",socketReady:!1,onMsg:function(e){console.log(e)}},a.login=a.login.bind(Object(d.a)(Object(d.a)(a))),a.logout=a.logout.bind(Object(d.a)(Object(d.a)(a))),a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.socket=new WebSocket(C),this.socket.onmessage=function(t){e.state.onMsg(t)},console.log(f+"/mainServices/auth/checktoken"),null!=localStorage.getItem("token")?b()(f+"/mainServices/auth/checktoken",{method:"POST",data:JSON.stringify({token:localStorage.getItem("token")}),headers:{"Content-Type":"application/json"}}).then(function(t){console.log(t.data),e.login(t.data)}).catch(function(t){console.log(t),e.setState({authorized:!1})}):e.setState({authorized:!1})}},{key:"setOnMsg",value:function(e){this.setState({onMsg:e})}},{key:"login",value:function(e){console.log(e),localStorage.setItem("email",e),this.setState({authorized:!0,user:e})}},{key:"logout",value:function(){localStorage.setItem("token",""),this.setState({authorized:!1})}},{key:"render",value:function(){var e=this,t=this;return null==this.state.authorized?r.a.createElement("h1",null,"Loading ... "):r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement(g.a,null,r.a.createElement(p.a,{exact:!0,path:y+"/dashboard",render:function(){return t.state.authorized?r.a.createElement(F,{user:t.state.user,logout:t.logout.bind(e)}):r.a.createElement(v.a,{to:y+"/signin"})}}),r.a.createElement(p.a,{exact:!0,path:y+"/chat/:id",render:function(){return t.state.authorized?r.a.createElement(Z,{setOnMsg:t.setOnMsg.bind(e),socket:e.socket,user:t.state.user,logout:t.logout.bind(e)}):r.a.createElement(v.a,{to:y+"/signin"})}}),r.a.createElement(p.a,{exact:!0,path:y+"/groups",render:function(){return t.state.authorized?r.a.createElement(z,{user:t.state.user,logout:t.logout.bind(e)}):r.a.createElement(v.a,{to:y+"/signin"})}}),r.a.createElement(p.a,{exact:!0,path:y+"/signin",render:function(){return t.state.authorized?r.a.createElement(v.a,{to:y+"/groups"}):r.a.createElement(x,{login:t.login.bind(e)})}}),r.a.createElement(p.a,{exact:!0,path:y+"/signup",render:function(){return t.state.authorized?r.a.createElement(v.a,{to:y+"/groups"}):r.a.createElement(N,{login:t.login.bind(e)})}}),r.a.createElement(p.a,{path:y+"/",render:function(){return r.a.createElement(v.a,{to:y+"/signin"})}}))),r.a.createElement(B,null))}}]),t}(r.a.Component);a(321);s.a.render(r.a.createElement(G,null),document.getElementById("root"))}},[[143,2,1]]]);
//# sourceMappingURL=main.c773b13f.chunk.js.map